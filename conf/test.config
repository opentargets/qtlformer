executor.name = "local"
process {
    resourceLimits = [
        cpus: 4,
        memory: '15.GB',
        time: '1.h',
    ]
}

workDir = "${projectDir}/testdata/work"
params {
    susie_dir    = "${projectDir}/testdata/susie"
    sumstats_dir = "${projectDir}/testdata/sumstats"
    output_dir   = "${projectDir}/testdata/output"
    metadata     = "https://raw.githubusercontent.com/eQTL-Catalogue/eQTL-Catalogue-resources/refs/heads/master/data_tables/dataset_metadata_upcoming.tsv"
}


timeline {
    enabled = true
    file    = "${params.output_dir}/pipeline_info/execution_timeline/execution_timeline_${params.trace_report_suffix}.html"
}
report {
    enabled = true
    file    = "${params.output_dir}/pipeline_info/execution_report/execution_report_${params.trace_report_suffix}.html"
}
trace {
    enabled = true
    file    = "${params.output_dir}/pipeline_info/execution_trace/execution_trace_${params.trace_report_suffix}.txt"
}
dag {
    enabled = true
    file    = "${params.output_dir}/pipeline_info/pipeline_dag/pipeline_dag_${params.trace_report_suffix}.html"
}

process {
    withLabel: manifest {
        container  = 'ghcr.io/opentargets/qtlformer:0.3.7'
        cpus       = 2
        memory     = '2.GB'
        time       = "5m"
        maxRetries = 1
        memory     = '2.GB'
    }
    withLabel: transform {
        container  = 'ghcr.io/opentargets/qtlformer:0.3.7'
        cpus       = 4
        memory     = '2.GB'
        time       = "10m"
        maxRetries = 1
        memory     = '2.GB'
    }
    // Required for Spark (as it can not read symlinks)
    withLabel: spark {
        stageInMode = 'copy'
    }
}
